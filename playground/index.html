<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Animal Playground</title>
    <link rel="icon" type="image/x-icon" href="../playground/favicon.ico">
</head>
<body>
    <h1>Animal Playground</h1>

    <textarea id="animalCode" style="width: 90%; height: 200px;">
roar "Hello Animal World!"
    </textarea>
    <br/>
    <button onclick="runAnimal()">Run</button>

    <h2>Output:</h2>
    <pre id="output"></pre>

    <script src="../wasm/wasm_exec.js"></script>
    <script>
        const go = new Go();

        async function loadWasm() {
            const result = await WebAssembly.instantiateStreaming(fetch("../wasm/animal.wasm"), go.importObject);
            console.log("Instantiated!");
            go.run(result.instance);
            console.log("Go runtime running! Now you can use runAnimalCode!");
        }

        function runAnimal() {
            const code = document.getElementById("animalCode").value;
            try {
                console.log("Calling runAnimalCode with:", code);
                const output = runAnimalCode(code);
                document.getElementById("output").innerText = output;
            } catch (err) {
                document.getElementById("output").innerText = "Error: " + err;
            }
        }

        loadWasm();
    </script>
</body>
</html>
